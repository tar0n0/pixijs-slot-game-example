{"version":3,"file":"DirectionalLight.mjs","sources":["../../../src/lights/directionalLight/DirectionalLight.ts"],"sourcesContent":["import { Light } from '../light/Light';\nimport { Point, Renderer } from '@pixi/core';\nimport { DisplayObject } from '@pixi/display';\nimport { DirectionalLightShader } from './DirectionalLightShader';\n\n/**\n * Directional light is drawn using a full-screen quad.\n * @memberof PIXI.lights\n */\nexport class DirectionalLight extends Light\n{\n    target: DisplayObject | Point;\n\n    /**\n     * @param {number} [color=0xFFFFFF] - The color of the light.\n     * @param {number} [brightness=1] - The intensity of the light.\n     * @param {PIXI.DisplayObject|PIXI.Point} [target] - The object in the scene to target.\n     */\n    constructor(color = 0xFFFFFF, brightness = 1, target: DisplayObject | Point)\n    {\n        super(color, brightness, new DirectionalLightShader());\n\n        this.target = target;\n    }\n\n    /**\n     * Sync shader\n     * @param {PIXI.Renderer} renderer - Renderer\n     */\n    override syncShader(renderer: Renderer): void\n    {\n        super.syncShader(renderer);\n\n        const shader = this.material;\n\n        const vec = shader.uniforms.uLightDirection;\n        const wt = this.worldTransform;\n        const twt = (this.target as any).worldTransform;\n\n        let tx: number;\n        let ty: number;\n\n        if (twt)\n        {\n            tx = twt.tx;\n            ty = twt.ty;\n        }\n        else\n        {\n            tx = this.target.x;\n            ty = this.target.y;\n        }\n\n        // calculate direction from this light to the target\n        vec.x = wt.tx - tx;\n        vec.y = wt.ty - ty;\n\n        // normalize\n        const len = Math.sqrt((vec.x * vec.x) + (vec.y * vec.y));\n\n        vec.x /= len;\n        vec.y /= len;\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;MASa,yBAAyB,MACtC;AAAA,EAQI,YAAY,QAAQ,UAAU,aAAa,GAAG,QAC9C;AACI,UAAM,OAAO,YAAY,IAAI,wBAAwB;AAErD,SAAK,SAAS;AAAA;AAClB,EAMS,WAAW,UACpB;AACI,UAAM,WAAW,QAAQ;AAEzB,UAAM,SAAS,KAAK;AAEpB,UAAM,MAAM,OAAO,SAAS;AAC5B,UAAM,KAAK,KAAK;AAChB,UAAM,MAAO,KAAK,OAAe;AAEjC,QAAI;AACJ,QAAI;AAEJ,QAAI,KACJ;AACI,WAAK,IAAI;AACT,WAAK,IAAI;AAAA,WAGb;AACI,WAAK,KAAK,OAAO;AACjB,WAAK,KAAK,OAAO;AAAA;AAIrB,QAAI,IAAI,GAAG,KAAK;AAChB,QAAI,IAAI,GAAG,KAAK;AAGhB,UAAM,MAAM,KAAK,KAAM,IAAI,IAAI,IAAI,IAAM,IAAI,IAAI,IAAI,CAAE;AAEvD,QAAI,KAAK;AACT,QAAI,KAAK;AAAA;AAEjB;;;;"}